<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>farmerbase тАУ рдЖрдореНрджрд╛рдиреА рд╡рд┐рд╡рд░рдг (Demo)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:
   "Noto Sans Devanagari",
   "Kalimati",
   "Mangal",
   "Nirmala UI",
   system-ui,
   Arial,
   sans-serif;
  background:#f4f7f6;
  margin:0;
}
header{
  background:#2e7d32;
  color:#fff;
  padding:20px;
  text-align:center;
}
main{
  max-width:1100px;
  margin:20px auto;
  background:#fff;
  padding:20px;
  border-radius:10px;
}
h2{color:#2e7d32;margin-top:30px}
.category{
  border:1px solid #ddd;
  padding:15px;
  border-radius:8px;
  margin-top:25px;
}
label{display:block;margin-top:10px;font-weight:600}
textarea,input{
  width:100%;
  padding:8px;
  margin-top:5px;
  font-family:inherit;
}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:15px;
}
th,td{
  border:1px solid #ccc;
  padding:8px;
  text-align:right;
}
th{text-align:center;background:#eef6f0}
td.left{text-align:left}
button{
  margin-top:10px;
  padding:6px 14px;
  background:#2e7d32;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.total{
  background:#eef6f0;
  padding:10px;
  margin-top:10px;
  font-weight:700;
}
footer{
  text-align:center;
  font-size:13px;
  color:#555;
  padding:15px;
}
</style>
</head>

<body>
<header>
<h1>ЁЯМ╛ farmerbase тАУ рдЖрдореНрджрд╛рдиреА рд╡рд┐рд╡рд░рдг (Demo)</h1>
<p>Category LOCKED | Item ADDABLE | Unicode Friendly</p>
</header>

<main>

<script>
function addIncomeRow(btn){
  let table = btn.previousElementSibling;
  let row = table.insertRow(-1);
  row.innerHTML = `
    <td class="left"><input placeholder="рдЖрдореНрджрд╛рдиреАрдХреЛ рд╕реНрд░реЛрдд"></td>
    <td><input type="number" oninput="calcIncomeRow(this)"></td>
    <td><input type="number" oninput="calcIncomeRow(this)"></td>
    <td class="rowTotal">0</td>
  `;
}

function calcIncomeRow(el){
  let row = el.closest("tr");
  let inputs = row.querySelectorAll("input");
  let qty = +inputs[1].value || 0;
  let rate = +inputs[2].value || 0;
  let total = qty * rate;
  row.querySelector(".rowTotal").innerText = total;
  calcCategory(row.closest(".category"));
}

function calcCategory(cat){
  let sum = 0;
  cat.querySelectorAll(".rowTotal").forEach(td=>{
    sum += +td.innerText || 0;
  });
  cat.querySelector(".catTotal").innerText = sum;
  calcGrandIncome();
}

function calcGrandIncome(){
  let g = 0;
  document.querySelectorAll(".catTotal").forEach(s=>{
    let val = s.innerText.replace(/,/g, "");
    g += parseInt(val) || 0;
  });
  document.getElementById("grandIncome").innerText = g.toLocaleString();

  // ЁЯФ┤ LIVE LINK
  localStorage.setItem("totalIncome", g);
}
</script>

<!-- ================= INCOME CATEGORIES ================= -->

<!-- 1 -->
<div class="category">
<h2>резя╕ПтГг рдореБрдЦреНрдп рдЙрддреНрдкрд╛рджрдирдмрд╛рдЯ рдЖрдореНрджрд╛рдиреА</h2>
<label>Category Narration</label>
<textarea placeholder="рдореБрдЦреНрдп рдЙрддреНрдкрд╛рджрди (рдЬрд╕реНрддреИ: рдорд╛рд╕реБ, рддрд░рдХрд╛рд░реА, рджреВрдз рдЖрджрд┐) рдмрд┐рдХреНрд░реАрдмрд╛рдЯ рдкреНрд░рд╛рдкреНрдд рд╣реБрдиреЗ рдЖрдореНрджрд╛рдиреАред"></textarea>

<table>
<tr><th>рдЖрдореНрджрд╛рдиреА рд╕реНрд░реЛрдд</th><th>рдкрд░рд┐рдорд╛рдг</th><th>рджрд░ (рд░реБ.)</th><th>рд░рдХрдо</th></tr>
<tr>
<td class="left"><input placeholder="рдЬрд╕реНрддреИ: рдорд╛рд╕реБ рдмрд┐рдХреНрд░реА"></td>
<td><input type="number" oninput="calcIncomeRow(this)"></td>
<td><input type="number" oninput="calcIncomeRow(this)"></td>
<td class="rowTotal">0</td>
</tr>
</table>
<button onclick="addIncomeRow(this)">+ рдЖрдореНрджрд╛рдиреА рдердкреНрдиреБрд╣реЛрд╕реН</button>
<div class="total">Category Total: рд░реБ. <span class="catTotal">0</span></div>
</div>

<!-- 2 -->
<div class="category">
<h2>реия╕ПтГг рд╕рд╣рд╛рдпрдХ рдЙрддреНрдкрд╛рджрдирдмрд╛рдЯ рдЖрдореНрджрд╛рдиреА</h2>
<label>Category Narration</label>
<textarea placeholder="рдореБрдЦреНрдп рдЙрддреНрдкрд╛рджрдирд╕рдБрдЧ рд╕рдореНрдмрдиреНрдзрд┐рдд рд╕рд╣рд╛рдпрдХ рдЙрддреНрдкрд╛рджрди (рдЬрд╕реНрддреИ: рдорд▓, рдЧреЛрдмрд░, рдмрд┐рдЙ, рдмрдЪреНрдЪрд╛ рдкрд╢реБ) рдмрд┐рдХреНрд░реАрдмрд╛рдЯ рдЖрдореНрджрд╛рдиреАред"></textarea>

<table>
<tr><th>рдЖрдореНрджрд╛рдиреА рд╕реНрд░реЛрдд</th><th>рдкрд░рд┐рдорд╛рдг</th><th>рджрд░ (рд░реБ.)</th><th>рд░рдХрдо</th></tr>
<tr>
<td class="left"><input placeholder="рдЬрд╕реНрддреИ: рдЧреЛрдмрд░ рдмрд┐рдХреНрд░реА"></td>
<td><input type="number" oninput="calcIncomeRow(this)"></td>
<td><input type="number" oninput="calcIncomeRow(this)"></td>
<td class="rowTotal">0</td>
</tr>
</table>
<button onclick="addIncomeRow(this)">+ рдЖрдореНрджрд╛рдиреА рдердкреНрдиреБрд╣реЛрд╕реН</button>
<div class="total">Category Total: рд░реБ. <span class="catTotal">0</span></div>
</div>

<!-- 3 -->
<div class="category">
<h2>рейя╕ПтГг рдЕрдиреНрдп рдЖрдореНрджрд╛рдиреА</h2>
<label>Category Narration</label>
<textarea placeholder="рдЕрдиреНрдп рдХреБрдиреИ рд╕реНрд░реЛрддрдмрд╛рдЯ рдкреНрд░рд╛рдкреНрдд рд╣реБрдиреЗ рдЖрдореНрджрд╛рдиреА (рдЬрд╕реНрддреИ: рд╕реЗрд╡рд╛ рд╢реБрд▓реНрдХ, рддрд╛рд▓рд┐рдо, рд╕рд╣рдпреЛрдЧ рдЖрджрд┐)ред"></textarea>

<table>
<tr><th>рдЖрдореНрджрд╛рдиреА рд╕реНрд░реЛрдд</th><th>рдкрд░рд┐рдорд╛рдг</th><th>рджрд░ (рд░реБ.)</th><th>рд░рдХрдо</th></tr>
<tr>
<td class="left"><input placeholder="рдЬрд╕реНрддреИ: рд╕реЗрд╡рд╛ рд╢реБрд▓реНрдХ"></td>
<td><input type="number" oninput="calcIncomeRow(this)"></td>
<td><input type="number" oninput="calcIncomeRow(this)"></td>
<td class="rowTotal">0</td>
</tr>
</table>
<button onclick="addIncomeRow(this)">+ рдЖрдореНрджрд╛рдиреА рдердкреНрдиреБрд╣реЛрд╕реН</button>
<div class="total">Category Total: рд░реБ. <span class="catTotal">0</span></div>
</div>

<!-- ================= GRAND TOTAL ================= -->
<h2>ЁЯФв рдХреБрд▓ рд╡рд╛рд░реНрд╖рд┐рдХ рдЖрдореНрджрд╛рдиреА</h2>
<div class="total" style="font-size:18px">
рд░реБ. <span id="grandIncome">0</span>
</div>

</main>

<footer>
┬й farmerbase BPMS Demo | Income Module
</footer>

</body>
</html>
