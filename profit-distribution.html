<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>Profit Distribution</title>

<style>
body{font-family:Arial;background:#f5f5f5;margin:0}
header,footer{
 background:#2e7d32;color:#fff;padding:12px 20px;
 display:flex;justify-content:space-between;align-items:center
}
header a,footer a{color:#fff;text-decoration:none;font-weight:bold}

.container{
 max-width:1100px;margin:auto;background:#fff;
 padding:20px;min-height:70vh
}

h1{text-align:center;font-size:32px;color:#2e7d32;margin:15px 0}

.summary{
 background:#f1f8e9;padding:15px;margin-bottom:20px;
 font-size:16px
}

table{
 width:100%;border-collapse:collapse;margin-top:15px
}
th,td{
 border:1px solid #ccc;padding:8px;text-align:center
}
th{background:#e8f5e9}

td input{width:100%;box-sizing:border-box;padding:5px}

.btn{padding:6px 12px;border:none;cursor:pointer}
.add{background:#2e7d32;color:#fff}
.del{background:#c62828;color:#fff}

.warn{color:#c62828;font-weight:bold}
.ok{color:#2e7d32;font-weight:bold}
.note{font-size:13px;color:#555;margin-top:10px}
</style>
</head>

<body>

<!-- ================= HEADER NAV ================= -->
<header>
  <a href="profit-loss-demo.html">тмЕя╕П рдирд╛рдлрд╛/рдиреЛрдХреНрд╕рд╛рди</a>
  <span>рдирд╛рдлрд╛ рд╡рд┐рддрд░рдг рд╡рд┐рд╡рд░рдг(Profit Utilization)</span>
  <a href="projection-5yr.html">рел рд╡рд░реНрд╖реЗ рдкреНрд░рдХреНрд╖реЗрдкрдг тЮбя╕П</a>
</header>

<div class="container">

<!-- ================= SUMMARY ================= -->
<div class="summary">
  ЁЯФ╣ <b>рдХреБрд▓ рд╢реБрджреНрдз рдирд╛рдлрд╛ (Auto):</b>
  <span id="totalProfit">0.00</span><br>
  ЁЯФ╣ <b>рдХреБрд▓ рд╡рд┐рддрд░рдг %:</b>
  <span id="totalPct">0%</span>
  <span id="status"></span>
</div>

<!-- ================= DISTRIBUTION TABLE ================= -->
<table>
<thead>
<tr>
  <th style="width:45%">рд╢реАрд░реНрд╖рдХ</th>
  <th style="width:20%">рдкреНрд░рддрд┐рд╢рдд (%)</th>
  <th style="width:25%">рд░рдХрдо</th>
  <th style="width:10%">ЁЯЧСя╕П</th>
</tr>
</thead>
<tbody id="distBody"></tbody>
</table>

<button class="btn add" onclick="addHead()">тЮХ рд╢реАрд░реНрд╖рдХ рдердкреНрдиреБрд╣реЛрд╕реН</button>

<div class="note">
тЬФя╕П рдирд╛рдлрд╛ рдЦрд░реНрдЪ рд╣реЛрдЗрди тАФ рдкреБрдирдГ рдкреНрд░рдпреЛрдЧ (reuse) рд╣реЛ ред<br>
тЬФя╕П рдХреБрд▓ рдкреНрд░рддрд┐рд╢рдд 100% рд╣реБрдиреИ рдкрд░реНрдЫ ред<br>
тЬФя╕П рдкреБрдирдГ рд▓рдЧрд╛рдиреА рд░рдХрдо 5-Year Projection рдорд╛ carry рд╣реБрдиреНрдЫ ред
</div>
</div>

<!-- ================= FOOTER NAV ================= -->
<footer>
   <a href="profit-loss-demo.html">тмЕя╕П рдирд╛рдлрд╛/рдиреЛрдХреНрд╕рд╛рди</a>
  <span>Farmerbase BP Engine- Profit Utilization)</span>
  <a href="projection-5yr.html">рел рд╡рд░реНрд╖реЗ рдкреНрд░рдХреНрд╖реЗрдкрдг тЮбя╕П</a>
</footer>

<script>
/* ================= LOAD PROFIT ================= */
const profit = Number(localStorage.getItem("netProfit")) || 0;

/* ================= DEFAULT DISTRIBUTION ================= */
let dist = JSON.parse(localStorage.getItem("profitDistribution")) || [
 {id:1,name:"рдкреБрдирдГ рд▓рдЧрд╛рдиреА",pct:60},
 {id:2,name:"рд╡рд╛рддрд╛рд╡рд░рдг рд╕рдВрд░рдХреНрд╖рдг",pct:10},
 {id:3,name:"рд╕рдореБрджрд╛рдп рд╡рд┐рдХрд╛рд╕",pct:10},
 {id:4,name:"рд╡реНрдпрдХреНрддрд┐рдЧрдд рдЙрдкрдпреЛрдЧ",pct:20}
];

/* ================= SAVE ================= */
function save(){
 localStorage.setItem("profitDistribution", JSON.stringify(dist));
}

/* ================= CRUD ================= */
function addHead(){
 dist.push({id:Date.now(),name:"",pct:0});
 save(); render();
}

function update(id,field,val){
 const d = dist.find(x=>x.id===id);
 d[field] = field==="pct" ? Number(val)||0 : val;
 save(); render();
}

function removeHead(id){
 if(confirm("рд╣рдЯрд╛рдЙрдиреЗ рд╣реЛ ?")){
  dist = dist.filter(d=>d.id!==id);
  save(); render();
 }
}

/* ================= RENDER ================= */
function render(){
 const tb = document.getElementById("distBody");
 tb.innerHTML = "";
 let sumPct = 0;

 dist.forEach(d=>{
  sumPct += d.pct;
  const amt = profit * d.pct / 100;

  tb.innerHTML += `
<tr>
<td><input value="${d.name}"
    onchange="update(${d.id},'name',this.value)"></td>
<td><input type="number" value="${d.pct}"
    onchange="update(${d.id},'pct',this.value)"></td>
<td>${amt.toFixed(2)}</td>
<td><button class="btn del"
    onclick="removeHead(${d.id})">ЁЯЧСя╕П</button></td>
</tr>`;
 });

 document.getElementById("totalProfit").innerText = profit.toFixed(2);
 document.getElementById("totalPct").innerText = sumPct + "%";

 document.getElementById("status").innerHTML =
  sumPct === 100
   ? '<span class="ok"> тЬФя╕П рдорд┐рд▓реНрдпреЛ</span>'
   : '<span class="warn"> тЭЧ 100% рд╣реБрдиреБрдкрд░реНрдЫ</span>';
}

render();
</script>

</body>
</html>
