<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>5 Year Projection</title>
<style>
body{font-family:Arial;background:#f5f5f5;margin:0}
header,footer{background:#2e7d32;color:#fff;padding:12px 20px;
display:flex;justify-content:space-between;align-items:center}
header a,footer a{color:#fff;text-decoration:none;font-weight:bold}
.container{max-width:1200px;margin:auto;background:#fff;padding:20px}
h1{text-align:center;color:#2e7d32}
table{width:100%;border-collapse:collapse;margin-top:15px}
th,td{border:1px solid #ccc;padding:8px;text-align:center}
th{background:#e8f5e9}
input{width:80px;padding:4px}
</style>
</head>

<body>

<header>
<a href="profit-distribution.html">⬅️ मुनाफा वितरण</a>
<span>५ वर्षे प्रक्षेपण (5-Year Projection)</span>
<a href="roi-irr-payback.html"> लगानी विश्लेषण➡️</a>
</header>

<div class="container">
<table>
<thead>
<tr>
<th>वर्ष</th>
<th>आम्दानी</th>
<th>खर्च</th>
<th>नाफा</th>
<th>आम्दानी बृद्धि %</th>
<th>खर्च बृद्धि %</th>
</tr>
</thead>
<tbody id="projBody"></tbody>
</table>
</div>

<footer>
 <a href="profit-distribution.html">⬅️ मुनाफा वितरण</a>
<span>Farmerbase BP Engine- (5-Year Projection)</span>
<a href="roi-irr-payback.html"> लगानी विश्लेषण➡️</a>
</footer>

<script>
let baseIncome=Number(localStorage.getItem("totalIncome"))||0;
let baseExpense=Number(localStorage.getItem("totalExpense"))||0;

let growth=JSON.parse(localStorage.getItem("growthRates"))||
[{i:10,e:8},{i:10,e:8},{i:10,e:8},{i:10,e:8},{i:10,e:8}];

function save(){localStorage.setItem("growthRates",JSON.stringify(growth));}

function render(){
 const tb=document.getElementById("projBody");
 tb.innerHTML="";
 let inc=baseIncome, exp=baseExpense;

 for(let y=0;y<5;y++){
  if(y>0){
   inc+=inc*growth[y].i/100;
   exp+=exp*growth[y].e/100;
  }
  const prof=inc-exp;

  tb.innerHTML+=`
<tr>
<td>${y+1}</td>
<td>${inc.toFixed(2)}</td>
<td>${exp.toFixed(2)}</td>
<td>${prof.toFixed(2)}</td>
<td><input type="number" value="${growth[y].i}"
 onchange="growth[${y}].i=this.value;save();render()"></td>
<td><input type="number" value="${growth[y].e}"
 onchange="growth[${y}].e=this.value;save();render()"></td>
</tr>`;
 }
}

render();
</script>
</body>
</html>
