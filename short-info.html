<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>Short Info | BPMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:"Noto Sans Devanagari","Kalimati","Mangal","Nirmala UI",system-ui,Arial;
  background:#f4f7f6;
  margin:0;
}

/* ===== HEADER ===== */
header{
  background:#2e7d32;
  color:#fff;
  padding:18px;
}
header a{
  color:#fff;
  text-decoration:none;
  margin-right:12px;
  font-weight:600;
}

/* ===== FORM ===== */
.container{
  max-width:900px;
  margin:30px auto;
  background:#fff;
  padding:30px;
  border-radius:10px;
}
h2{margin-top:0}

label{
  font-weight:600;
  display:block;
  margin-top:15px;
}
input,textarea{
  width:100%;
  padding:8px;
  margin-top:5px;
  font-family:inherit;
}
textarea{min-height:80px}

button{
  margin-top:20px;
  padding:10px 16px;
  background:#1b5e20;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
}

/* ===== PRINT ===== */
@media print{
  header,button,.no-print{display:none!important}
  body{background:#fff}
  .container{margin:0;padding:0}
}
</style>
</head>

<body>

<!-- ===== HEADER ===== -->
<header class="no-print">
  <strong>тЬПя╕П Short Info Edit</strong>
  |
  <a href="index.html">ЁЯПа Home</a>
  <a href="full-proposal.html">ЁЯз╛ Full Proposal</a>
</header>

<!-- ===== FORM ===== -->
<div class="container">
  <h2>рд╡реНрдпрд╡рд╕рд╛рдп / рдкреНрд░рд╕реНрддрд╛рд╡рдирд╛рдХреЛ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд╡рд┐рд╡рд░рдг</h2>

  <label>рез. рд╡реНрдпрд╡рд╕рд╛рдп / рдкреНрд░рд╕реНрддрд╛рд╡рдирд╛рдХреЛ рдирд╛рдо</label>
  <input id="bp_name">

  <label>реи. рд╕рдЮреНрдЪрд╛рд▓рди рд╣реБрдиреЗ рд╕реНрдерд╛рди</label>
  <input id="bp_location">

  <label>рей. рд╕рдЮреНрдЪрд╛рд▓рди рдЧрд░реНрдиреЗ рд╕рдВрд╕реНрдерд╛</label>
  <input id="bp_org">

  <label>рек. рдкреНрд░реЛрдкреНрд░рд╛рдЗрдЯрд░рдХреЛ рдирд╛рдо</label>
  <input id="bp_owner">

  <label>рел. рд╕рдореНрдкрд░реНрдХ рд╡реНрдпрдХреНрддрд┐</label>
  <input id="bp_contact">

  <label>рем. рдЙрддреНрдкрд╛рджрди рдЧрд░рд┐рдиреЗ рд╡рд╕реНрддреБрд╣рд░реВ / рд╡реНрдпрд╡рд╕рд╛рдпрд┐рдХ рдкреНрд░рдХреГрддрд┐</label>
  <textarea id="bp_products"></textarea>

  <label>рен. рдореБрдЦреНрдп рдмрдЬрд╛рд░</label>
  <input id="bp_market">

  <label>рео. рдХреБрд▓ рдкреВрдБрдЬреА (рд░реБ.)</label>
  <input id="bp_capital">

  <label>реп. рдЪрд╛рд▓реБ рдкреВрдБрдЬреА (рд░реБ.)</label>
  <input id="bp_working">

  <label>резреж. рд╕реНрдерд┐рд░ рдкреВрдБрдЬреА (рд░реБ.)</label>
  <input id="bp_fixed">

  <label>резрез. рд╡рд╛рд░реНрд╖рд┐рдХ рдЦреБрдж рдирд╛рдлрд╛ (рел рд╡рд░реНрд╖рдХреЛ рд╕рд░рджрд░)</label>
  <input id="bp_avg_profit">

  <label>резреи. рд▓рдЧрд╛рдиреАрдХреЛ рдкреНрд░рддрд┐рдлрд▓ (%)</label>
  <input id="bp_roi">

  <label>резрей. рд▓рдЧрд╛рдиреА рдлрд┐рд░реНрддрд╛ рдЕрд╡рдзрд┐ (рд╡рд░реНрд╖)</label>
  <input id="bp_payback">

  <button onclick="saveShortInfo()">ЁЯТ╛ Save Short Info</button>
</div>

<script>
/* ===== RESTORE ACTIVE PROJECT (MANDATORY) ===== */
(function restoreActiveProject(){
  let key = localStorage.getItem("activeProject");
  if(!key) return;

  let d = JSON.parse(localStorage.getItem(key));
  if(!d) return;

  localStorage.setItem("shortInfo", JSON.stringify(d.shortInfo||{}));
})();

/* ===== LOAD FORM ===== */
function loadForm(){
  let s = JSON.parse(localStorage.getItem("shortInfo")||"{}");

  bp_name.value        = s.bp_name||"";
  bp_location.value    = s.bp_location||"";
  bp_org.value         = s.bp_org||"";
  bp_owner.value       = s.bp_owner||"";
  bp_contact.value     = s.bp_contact||"";
  bp_products.value    = s.bp_products||"";
  bp_market.value      = s.bp_market||"";
  bp_capital.value     = s.bp_capital||"";
  bp_working.value     = s.bp_working||"";
  bp_fixed.value       = s.bp_fixed||"";
  bp_avg_profit.value  = s.bp_avg_profit||"";
  bp_roi.value         = s.bp_roi||"";
  bp_payback.value     = s.bp_payback||"";
}

/* ===== SAVE ===== */
function saveShortInfo(){
  let data = {
    bp_name: bp_name.value,
    bp_location: bp_location.value,
    bp_org: bp_org.value,
    bp_owner: bp_owner.value,
    bp_contact: bp_contact.value,
    bp_products: bp_products.value,
    bp_market: bp_market.value,
    bp_capital: bp_capital.value,
    bp_working: bp_working.value,
    bp_fixed: bp_fixed.value,
    bp_avg_profit: bp_avg_profit.value,
    bp_roi: bp_roi.value,
    bp_payback: bp_payback.value
  };

  localStorage.setItem("shortInfo", JSON.stringify(data));

  // also update active project if exists
  let key = localStorage.getItem("activeProject");
  if(key){
    let p = JSON.parse(localStorage.getItem(key));
    if(p){
      p.shortInfo = data;
      localStorage.setItem(key, JSON.stringify(p));
    }
  }

  alert("Short Info Save рднрдпреЛ");
}

window.onload = loadForm;
</script>

</body>
</html>
