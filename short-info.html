<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>Short Info | BPMS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:"Noto Sans Devanagari","Kalimati","Mangal","Nirmala UI",system-ui,Arial;
  background:#f4f7f6;
  margin:0;
}
.container{
  max-width:900px;
  margin:25px auto;
  background:#fff;
  padding:25px;
  border-radius:10px;
}
h2{margin-top:0;color:#2e7d32}
<header>
  <a href="index.html">тмЕя╕ПтмЕя╕ПтмЕя╕ПтмЕя╕ПтмЕя╕ПтмЕя╕П Back to Home</a>
  <span>--------рд╕рдВрдХреНрд╖рд┐рдкреНрдд рдкрд░рд┐рдЪрдп--------</span>
  <a href="existing-status.html">Existing Status тЮбя╕ПтЮбя╕ПтЮбя╕ПтЮбя╕ПтЮбя╕ПтЮбя╕П</a>
</header>
/* ===== AUTOSAVE ===== */
#autosaveStatus{
  font-size:13px;
  color:#2e7d32;
  margin-bottom:10px;
}

/* ===== NOTICE ===== */
#noticeBox{
  display:none;
  background:#fff8e1;
  border:1px solid #ffe082;
  padding:10px;
  border-radius:6px;
  margin-bottom:15px;
  font-size:14px;
}

/* ===== FORM ===== */
label{display:block;font-weight:600;margin-top:14px}
input,textarea{
  width:100%;
  padding:8px;
  margin-top:6px;
  font-family:inherit;
}
textarea{min-height:70px}

/* ===== NAV ===== */
.nav{
  display:flex;
  justify-content:space-between;
  margin-top:30px;
}
button{
  padding:8px 16px;
  border:none;
  border-radius:6px;
  cursor:pointer;
  background:#2e7d32;
  color:#fff;
}
.highlight{
  border:2px solid #ff9800 !important;
  background:#fff3e0;
}

@media print{
  button,.progress-wrap,#autosaveStatus,#noticeBox{display:none}
}
</style>
</head>

<body>

<div class="container">

<header>
  <a href="index.html">тмЕя╕ПтмЕя╕ПтмЕя╕ПтмЕя╕П рдореБрдЦреНрдпрдкреГрд╖реНрдардорд╛ рдЬрд╛рдиреБрд╣реЛрд╕реН</a>
  <span>-----<h2> рд╡реНрдпрд╡рд╕рд╛рдп / рдкреНрд░рд╕реНрддрд╛рд╡рдирд╛рдХреЛ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд╡рд┐рд╡рд░рдг</h2>-----</span>
  <a href="existing-status.html">рд╡реНрдпрд╡рд╕рд╛рдпрдХреЛ рд╡рд░реНрддрдорд╛рди рдЕрд╡рд╕реНрдерд╛рдорд╛ рдЬрд╛рдиреБрд╣реЛрд╕реН тЮбя╕ПтЮбя╕ПтЮбя╕ПтЮбя╕П</a>
</header>


  
<div id="autosaveStatus">ЁЯТ╛ Saved</div>
<div id="noticeBox"></div>

<h2>тЬПя╕П рд╡реНрдпрд╡рд╕рд╛рдп / рдкреНрд░рд╕реНрддрд╛рд╡рдирд╛рдХреЛ рд╕рдВрдХреНрд╖рд┐рдкреНрдд рд╡рд┐рд╡рд░рдг</h2>

<label>рд╡реНрдпрд╡рд╕рд╛рдп / рдкреНрд░рд╕реНрддрд╛рд╡рдирд╛рдХреЛ рдирд╛рдо</label>
<input id="bp_name">

<label>рд╕рдЮреНрдЪрд╛рд▓рди рд╣реБрдиреЗ рд╕реНрдерд╛рди (рдареЗрдЧрд╛рдирд╛)</label>
<input id="bp_location">

<label>рд╕рдЮреНрдЪрд╛рд▓рди рдЧрд░реНрдиреЗ рд╕рдВрд╕реНрдерд╛</label>
<input id="bp_org">

<label>рдкреНрд░реЛрдкреНрд░рд╛рдЗрдЯрд░рдХреЛ рдирд╛рдо</label>
<input id="bp_owner">

<label>рд╕рдореНрдкрд░реНрдХ рд╡реНрдпрдХреНрддрд┐</label>
<input id="bp_contact_person">

<label>рд╕рдореНрдкрд░реНрдХ рдирдореНрдмрд░</label>
<input id="bp_phone">

<label>рдЗрдореЗрд▓ (optional)</label>
<input id="bp_email">

<label>рдЙрддреНрдкрд╛рджрди / рд╡реНрдпрд╡рд╕рд╛рдпрд┐рдХ рдкреНрд░рдХреГрддрд┐</label>
<textarea id="bp_products"></textarea>

<label>рдореБрдЦреНрдп рдмрдЬрд╛рд░</label>
<input id="bp_market">

<hr>

<label>рдХреБрд▓ рдкреВрдБрдЬреА (рд░реБ.)</label>
<input id="bp_capital" type="number">

<button onclick="saveShortInfo()">ЁЯТ╛ Save</button>

<div class="nav">
  <button onclick="goPrev()">тмЕ Home</button>
  <button onclick="goNext()">Next тЮб</button>
</div>

</div>

<script>
/* ===== SAFETY ===== */
let activeKey = localStorage.getItem("activeProject");
if(!activeKey){
  alert("рдкрд╣рд┐рд▓реЗ Home рдмрд╛рдЯ Project рдЦреЛрд▓реНрдиреБрд╣реЛрд╕реН");
  location.href="index.html";
}
let project = JSON.parse(localStorage.getItem(activeKey));

/* ===== PROGRESS ===== */
document.getElementById("progressBar").style.width="14%";

/* ===== LOAD ===== */
function loadForm(){
  let s = project.shortInfo||{};
  for(let k in s){
    if(document.getElementById(k))
      document.getElementById(k).value = s[k];
  }
}
loadForm();

/* ===== SAVE ===== */
function saveShortInfo(){
  let data={};
  document.querySelectorAll("input,textarea").forEach(el=>{
    data[el.id]=el.value||"";
  });
  project.shortInfo=data;
  project.lastEdited=new Date().toLocaleString("ne-NP");
  localStorage.setItem(activeKey,JSON.stringify(project));
  autosaveStatus.innerText="тЬФ Saved";
  checkNotices();
}

/* ===== AUTOSAVE ===== */
let t;
document.querySelectorAll("input,textarea").forEach(el=>{
  el.addEventListener("input",()=>{
    autosaveStatus.innerText="тП│ Saving...";
    clearTimeout(t);
    t=setTimeout(saveShortInfo,700);
  });
});

/* ===== NOTICES ===== */
function highlight(id){
  let e=document.getElementById(id);
  if(!e) return;
  e.classList.add("highlight");
  e.scrollIntoView({behavior:"smooth",block:"center"});
  setTimeout(()=>e.classList.remove("highlight"),3000);
}
function checkNotices(){
  let n=[];
  if(!bp_location.value)
    n.push(`рдареЗрдЧрд╛рдирд╛ рдЫреИрди <a href="#" onclick="highlight('bp_location')">[рджреЗрдЦрд╛рдК]</a>`);
  if(!bp_phone.value)
    n.push(`рд╕рдореНрдкрд░реНрдХ рдирдореНрдмрд░ рдЫреИрди <a href="#" onclick="highlight('bp_phone')">[рджреЗрдЦрд╛рдК]</a>`);
  if(n.length){
    noticeBox.style.display="block";
    noticeBox.innerHTML="тД╣я╕П <b>рд╕реВрдЪрдирд╛:</b><ul><li>"+n.join("</li><li>")+"</li></ul>";
  }else noticeBox.style.display="none";
}
checkNotices();

/* ===== FINAL LOCK ===== */
if(project.status==="final"){
  document.querySelectorAll("input,textarea,button").forEach(b=>{
    if(b.innerText.includes("Home")||b.innerText.includes("Next")) return;
    b.disabled=true;b.style.opacity=.7;
  });
}

/* ===== NAV ===== */
function goPrev(){location.href="index.html";}
function goNext(){saveShortInfo();location.href="business-detail.html";}
</script>

</body>
</html>
