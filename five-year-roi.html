<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>рел-рд╡рд░реНрд╖реЗ ROI рд╡рд┐рд╢реНрд▓реЗрд╖рдг | Business Plan</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
/* ===== BASE ===== */
body{
  font-family:"Noto Sans Devanagari","Kalimati","Mangal","Nirmala UI",system-ui,Arial;
  background:#f4f7f6;
  margin:0;
}

/* ===== HEADER ===== */
header{
  background:#2e7d32;
  color:#fff;
  padding:20px;
}
header h1{margin:0}

nav{margin-top:10px}
nav a{
  color:#fff;
  text-decoration:none;
  margin-right:12px;
  font-weight:600;
}
nav a:hover{text-decoration:underline}

.print-btn{
  margin-top:10px;
  padding:8px 14px;
  background:#fff;
  color:#2e7d32;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-weight:600;
}

/* ===== MAIN ===== */
main{
  max-width:1000px;
  margin:25px auto;
  background:#fff;
  padding:30px;
  border-radius:10px;
}

h2,h3{color:#2e7d32}

.grid{
  display:grid;
  grid-template-columns:1fr 1fr;
  gap:20px;
}

label{
  display:block;
  margin-top:10px;
  font-weight:600;
}

input{
  width:100%;
  padding:6px;
  margin-top:5px;
  font-family:inherit;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:20px;
}
th,td{
  border:1px solid #ccc;
  padding:8px;
  text-align:right;
}
th{text-align:center;background:#eef6f0}
td.left{text-align:left}

.summary-box{
  margin-top:25px;
  padding:15px;
  background:#eef6f0;
  border-left:6px solid #2e7d32;
  font-size:16px;
}

/* ===== FOOTER ===== */
footer{
  text-align:center;
  font-size:13px;
  color:#555;
  padding:20px;
}

/* ===== PRINT ===== */
@media print{
  header,
  nav,
  .print-btn,
  .no-print,
  footer{
    display:none !important;
  }
  body{background:#fff}
  main{
    margin:0;
    padding:0;
    box-shadow:none;
    border-radius:0;
  }
}
</style>
</head>

<body>

<!-- ===== HEADER (SCREEN ONLY) ===== -->
<header class="no-print">
  <h1>ЁЯМ╛ farmerbase BPMS</h1>
  <p>рел-рд╡рд░реНрд╖реЗ рд▓рдЧрд╛рдиреА рдкреНрд░рддрд┐рдлрд▓ (ROI) рд╡рд┐рд╢реНрд▓реЗрд╖рдг</p>

  <nav>
    <a href="index.html">ЁЯПа Home</a>
    <a href="short-info.html">ЁЯУД Short Info</a>
    <a href="business-detail.html">ЁЯУШ рд╡рд┐рд╕реНрддреГрдд рд╡рд┐рд╡рд░рдг</a>
    <a href="expense-demo.html">ЁЯТ╕ рдЦрд░реНрдЪ</a>
    <a href="income-demo.html">ЁЯТ░ рдЖрдореНрджрд╛рдиреА</a>
    <a href="profit-loss-demo.html">ЁЯУК рдирд╛рдлрд╛/рдШрд╛рдЯрд╛</a>
    <a href="five-year-roi.html">ЁЯУИ рел-рд╡рд░реНрд╖реЗ ROI</a>
    <a href="full-proposal.html">ЁЯз╛ Full Proposal</a>
  </nav>

  <button onclick="window.print()" class="print-btn">
    ЁЯЦия╕П Print / Save PDF
  </button>
</header>

<!-- ===== MAIN ===== -->
<main>

<h2>ЁЯУИ рел-рд╡рд░реНрд╖реЗ рд╡рд┐рддреНрддреАрдп рдкреНрд░рдХреНрд╖реЗрдкрдг</h2>

<div class="grid">
  <div>
    <label>рд╡рд╛рд░реНрд╖рд┐рдХ рдЦрд░реНрдЪ рд╡реГрджреНрдзрд┐ (%)</label>
    <input type="number" id="expGrowth" value="5">
  </div>
  <div>
    <label>рд╡рд╛рд░реНрд╖рд┐рдХ рдЖрдореНрджрд╛рдиреА рд╡реГрджреНрдзрд┐ (%)</label>
    <input type="number" id="incGrowth" value="10">
  </div>
</div>

<button onclick="calculate()" style="margin-top:15px">
ЁЯФД Calculate
</button>

<table>
  <tr>
    <th>рд╡рд░реНрд╖</th>
    <th>рдЦрд░реНрдЪ (рд░реБ.)</th>
    <th>рдЖрдореНрджрд╛рдиреА (рд░реБ.)</th>
    <th>рдирд╛рдлрд╛ (рд░реБ.)</th>
  </tr>
  <tbody id="roiTable"></tbody>
</table>

<div class="summary-box" id="summary"></div>

</main>

<footer class="no-print">
┬й Business Plan Management System
</footer>

<!-- ===== SCRIPT ===== -->
<script>
function calculate(){
  let baseExp = Number(localStorage.getItem("totalExpense")) || 0;
  let baseInc = Number(localStorage.getItem("totalIncome")) || 0;

  let expRate = Number(document.getElementById("expGrowth").value) || 0;
  let incRate = Number(document.getElementById("incGrowth").value) || 0;

  let tbody = document.getElementById("roiTable");
  tbody.innerHTML = "";

  let curExp = baseExp;
  let curInc = baseInc;
  let totalProfit = 0;
  let paybackYear = 0;
  let investment = baseExp;

  for(let y=1; y<=5; y++){
    if(y>1){
      curExp = curExp * (1 + expRate/100);
      curInc = curInc * (1 + incRate/100);
    }

    let profit = curInc - curExp;
    totalProfit += profit;

    if(totalProfit >= investment && paybackYear === 0){
      paybackYear = y;
    }

    tbody.innerHTML += `
      <tr>
        <td class="left">${y}</td>
        <td>${Math.round(curExp).toLocaleString()}</td>
        <td>${Math.round(curInc).toLocaleString()}</td>
        <td>${Math.round(profit).toLocaleString()}</td>
      </tr>
    `;
  }

  let roi = investment>0 ? ((totalProfit / investment)*100).toFixed(2) : 0;

  localStorage.setItem("roi", roi);
  localStorage.setItem("payback", paybackYear || "рел рд╡рд░реНрд╖рднрдиреНрджрд╛ рдмрдвреА");

  document.getElementById("summary").innerHTML = `
    <strong>рдирд┐рд╖реНрдХрд░реНрд╖:</strong><br>
    рел рд╡рд░реНрд╖рдХреЛ рдЕрд╡рдзрд┐рдорд╛ рдХреБрд▓ рдирд╛рдлрд╛ рд░реБ. ${Math.round(totalProfit).toLocaleString()} рд╣реБрдиреЗ,
    рд▓рдЧрд╛рдиреАрдХреЛ рдкреНрд░рддрд┐рдлрд▓ ${roi}% рд░рд╣рдиреЗ рддрдерд╛
    рд▓рдЧрд╛рдиреА рдлрд┐рд░реНрддрд╛ рдЕрд╡рдзрд┐ ${paybackYear ? paybackYear + " рд╡рд░реНрд╖" : "рел рд╡рд░реНрд╖рднрдиреНрджрд╛ рдмрдвреА"} рд╣реБрдиреЗ рджреЗрдЦрд┐рдиреНрдЫред
  `;
}

/* Auto-calc on load */
calculate();
</script>

</body>
</html>
