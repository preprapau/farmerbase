<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>farmerbase ‚Äì ‡§ñ‡§∞‡•ç‡§ö ‡§§‡§•‡§æ ‡§≤‡§ó‡§æ‡§®‡•Ä ‡§µ‡§ø‡§µ‡§∞‡§£ (Demo)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:
   "Noto Sans Devanagari",
   "Kalimati",
   "Mangal",
   "Nirmala UI",
   system-ui,
   Arial,
   sans-serif;
  background:#f4f7f6;
  margin:0;
}
header{
  background:#2e7d32;
  color:#fff;
  padding:20px;
  text-align:center;
}
main{
  max-width:1100px;
  margin:20px auto;
  background:#fff;
  padding:20px;
  border-radius:10px;
}
h2{color:#2e7d32;margin-top:30px}
.category{
  border:1px solid #ddd;
  padding:15px;
  border-radius:8px;
  margin-top:25px;
}
label{display:block;margin-top:10px;font-weight:600}
textarea,input{
  width:100%;
  padding:8px;
  margin-top:5px;
  font-family:inherit;
}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:15px;
}
th,td{
  border:1px solid #ccc;
  padding:8px;
  text-align:right;
}
th{text-align:center;background:#eef6f0}
td.left{text-align:left}
button{
  margin-top:10px;
  padding:6px 14px;
  background:#2e7d32;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.total{
  background:#eef6f0;
  padding:10px;
  margin-top:10px;
  font-weight:700;
}
footer{
  text-align:center;
  font-size:13px;
  color:#555;
  padding:15px;
}
</style>
</head>

<body>
<header>
<h1>üåæ farmerbase ‚Äì ‡§ñ‡§∞‡•ç‡§ö ‡§§‡§•‡§æ ‡§≤‡§ó‡§æ‡§®‡•Ä ‡§µ‡§ø‡§µ‡§∞‡§£ (Demo)</h1>
<p>Category LOCKED | Item ADDABLE | Unicode Friendly</p>
</header>

<main>

<script>
function addRow(btn){
  let table = btn.previousElementSibling;
  let row = table.insertRow(-1);
  row.innerHTML = `
    <td class="left"><input placeholder="‡§∂‡•Ä‡§∞‡•ç‡§∑‡§ï"></td>
    <td><input type="number" oninput="calcRow(this)"></td>
    <td><input type="number" oninput="calcRow(this)"></td>
    <td class="rowTotal">0</td>
  `;
}

function calcRow(el){
  let row = el.closest("tr");
  let inputs = row.querySelectorAll("input");
  let qty = +inputs[1].value || 0;
  let rate = +inputs[2].value || 0;
  let total = qty * rate;
  row.querySelector(".rowTotal").innerText = total;
  calcCategory(row.closest(".category"));
}

function calcCategory(cat){
  let sum = 0;
  cat.querySelectorAll(".rowTotal").forEach(td=>{
    sum += +td.innerText || 0;
  });
  cat.querySelector(".catTotal").innerText = sum;
  calcGrand();
}

function calcGrand(){
  let g = 0;
  document.querySelectorAll(".catTotal").forEach(s=>{
    g += +s.innerText || 0;
  });
  document.getElementById("grandTotal").innerText = g;
  calcFunding();
}

function calcFunding(){
  let total = +document.getElementById("grandTotal").innerText || 0;
  document.getElementById("govAmt").innerText = (total * (+gov.value||0)/100).toFixed(0);
  document.getElementById("coopAmt").innerText = (total * (+coop.value||0)/100).toFixed(0);
  document.getElementById("privateAmt").innerText = (total * (+private.value||0)/100).toFixed(0);
}
</script>

<h2>üî¢ ‡§ï‡•Å‡§≤ ‡§µ‡§æ‡§∞‡•ç‡§∑‡§ø‡§ï ‡§ñ‡§∞‡•ç‡§ö / ‡§ï‡•Å‡§≤ ‡§≤‡§ó‡§æ‡§®‡•Ä</h2>
<div class="total" style="font-size:18px">
‡§∞‡•Å. <span id="grandTotal">0</span>
</div>

<!-- Funding Source -->
<div class="category">
<h2>üí∞ ‡§ñ‡§∞‡•ç‡§ö / ‡§≤‡§ó‡§æ‡§®‡•Ä ‡§µ‡•ç‡§Ø‡§π‡•ã‡§∞‡§ø‡§®‡•á ‡§∏‡•ç‡§∞‡•ã‡§§</h2>

<label>‡§∏‡§∞‡§ï‡§æ‡§∞ (%)</label>
<input id="gov" type="number" value="40" oninput="calcFunding()">

<label>‡§∏‡§π‡§ï‡§æ‡§∞‡•Ä (%)</label>
<input id="coop" type="number" value="30" oninput="calcFunding()">

<label>‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ‡§ó‡§§ / ‡§®‡§ø‡§ú‡•Ä (%)</label>
<input id="private" type="number" value="30" oninput="calcFunding()">

<table>
<tr><th>‡§∏‡•ç‡§∞‡•ã‡§§</th><th>‡§∞‡§ï‡§Æ (‡§∞‡•Å.)</th></tr>
<tr><td class="left">‡§∏‡§∞‡§ï‡§æ‡§∞</td><td id="govAmt">0</td></tr>
<tr><td class="left">‡§∏‡§π‡§ï‡§æ‡§∞‡•Ä</td><td id="coopAmt">0</td></tr>
<tr><td class="left">‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ‡§ó‡§§ / ‡§®‡§ø‡§ú‡•Ä</td><td id="privateAmt">0</td></tr>
</table>

<label>Funding Narration</label>
<textarea placeholder="‡§ï‡•Å‡§≤ ‡§≤‡§ó‡§æ‡§®‡•Ä‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§ï‡§§‡§ø ‡§™‡•ç‡§∞‡§§‡§ø‡§∂‡§§ ‡§ï‡•Å‡§® ‡§∏‡•ç‡§∞‡•ã‡§§‡§¨‡§æ‡§ü ‡§µ‡•ç‡§Ø‡§π‡•ã‡§∞‡§ø‡§®‡•á ‡§≠‡§®‡•ç‡§®‡•á ‡§µ‡§ø‡§µ‡§∞‡§£‡•§"></textarea>
</div>

</main>

<footer>
¬© farmerbase BPMS Demo | Expense + Investment Module
</footer>

</body>
</html>
