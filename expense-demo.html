<!DOCTYPE html>
<html lang="ne">
<head>
<meta charset="UTF-8">
<title>farmerbase тАУ рдЦрд░реНрдЪ рддрдерд╛ рд▓рдЧрд╛рдиреА рд╡рд┐рд╡рд░рдг (Demo)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
body{
  font-family:
   "Noto Sans Devanagari",
   "Kalimati",
   "Mangal",
   "Nirmala UI",
   system-ui,
   Arial,
   sans-serif;
  background:#f4f7f6;
  margin:0;
}
header{
  background:#2e7d32;
  color:#fff;
  padding:20px;
  text-align:center;
}
main{
  max-width:1100px;
  margin:20px auto;
  background:#fff;
  padding:20px;
  border-radius:10px;
}
h2{color:#2e7d32;margin-top:30px}
.category{
  border:1px solid #ddd;
  padding:15px;
  border-radius:8px;
  margin-top:25px;
}
label{display:block;margin-top:10px;font-weight:600}
textarea,input{
  width:100%;
  padding:8px;
  margin-top:5px;
  font-family:inherit;
}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:15px;
}
th,td{
  border:1px solid #ccc;
  padding:8px;
  text-align:right;
}
th{text-align:center;background:#eef6f0}
td.left{text-align:left}
button{
  margin-top:10px;
  padding:6px 14px;
  background:#2e7d32;
  color:#fff;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.total{
  background:#eef6f0;
  padding:10px;
  margin-top:10px;
  font-weight:700;
}
footer{
  text-align:center;
  font-size:13px;
  color:#555;
  padding:15px;
}
.small{font-size:13px;color:#444}
</style>
</head>

<body>
<header>
<h1>ЁЯМ╛ farmerbase тАУ рдЦрд░реНрдЪ рддрдерд╛ рд▓рдЧрд╛рдиреА рд╡рд┐рд╡рд░рдг (Demo)</h1>
<p>Category LOCKED | Item ADDABLE | Funding ADDABLE | Unicode Friendly</p>
</header>

<main>
<div style="text-align:right;margin-bottom:15px">
  <button onclick="window.print()"
    style="padding:8px 16px;background:#2e7d32;color:#fff;
           border:none;border-radius:6px;cursor:pointer">
    ЁЯЦия╕П Print / PDF
  </button>
</div>
<script>
function addExpenseRow(btn){
  let table = btn.previousElementSibling;
  let row = table.insertRow(-1);
  row.innerHTML = `
    <td class="left"><input placeholder="рд╢реАрд░реНрд╖рдХ"></td>
    <td><input type="number" oninput="calcExpenseRow(this)"></td>
    <td><input type="number" oninput="calcExpenseRow(this)"></td>
    <td class="rowTotal">0</td>
  `;
}

function calcExpenseRow(el){
  let row = el.closest("tr");
  let inputs = row.querySelectorAll("input");
  let qty = +inputs[1].value || 0;
  let rate = +inputs[2].value || 0;
  let total = qty * rate;
  row.querySelector(".rowTotal").innerText = total;
  calcCategory(row.closest(".category"));
}

function calcCategory(cat){
  let sum = 0;
  cat.querySelectorAll(".rowTotal").forEach(td=>{
    sum += +td.innerText || 0;
  });
  cat.querySelector(".catTotal").innerText = sum;
  calcGrand();
}

function calcGrand(){
  let g = 0;
  document.querySelectorAll(".catTotal").forEach(s=>{
    let val = s.innerText.replace(/,/g, ""); // ЁЯФС comma рд╣рдЯрд╛рдЙрдиреЗ
    g += parseInt(val) || 0;
  });
  document.getElementById("grandTotal").innerText = g.toLocaleString();

  // ЁЯФ┤ LIVE LINK (рд╕рдмреИрднрдиреНрджрд╛ рдорд╣рддреНрд╡рдкреВрд░реНрдг)
  localStorage.setItem("totalExpense", g);

  calcFunding();
}

/* FUNDING */
function addFundingRow(){
  let table = document.getElementById("fundingTable");
  let row = table.insertRow(-1);
  row.innerHTML = `
    <td class="left"><input placeholder="рд╕реНрд░реЛрдд рдирд╛рдо"></td>
    <td><input type="number" oninput="calcFunding()"></td>
    <td class="fundAmt">0</td>
  `;
}

function calcFunding(){
  let total = +document.getElementById("grandTotal").innerText || 0;
  let rows = document.querySelectorAll(".fundAmt");
  let percInputs = document.querySelectorAll("#fundingTable input[type='number']");
  let percSum = 0;

  percInputs.forEach(i=> percSum += (+i.value || 0));

  percInputs.forEach((inp,idx)=>{
    let amt = total * ((+inp.value||0)/100);
    rows[idx].innerText = Math.round(amt);
  });

  document.getElementById("percTotal").innerText = percSum;
}
</script>

<!-- ================= EXPENSE CATEGORIES ================= -->

<!-- 1 -->
<div class="category">
<h2>резя╕ПтГг рдкреНрд░рд╛рд░рдореНрднрд┐рдХ рд▓рдЧрд╛рдиреА</h2>
<label>Category Narration</label>
<textarea placeholder="рд╡реНрдпрд╡рд╕рд╛рдп рд╕реБрд░реБ рдЧрд░реНрди рдЖрд╡рд╢реНрдпрдХ рджреАрд░реНрдШрдХрд╛рд▓реАрди рдкреНрд░рд╛рд░рдореНрднрд┐рдХ рд▓рдЧрд╛рдиреА рдЦрд░реНрдЪред"></textarea>

<table>
<tr><th>рд╢реАрд░реНрд╖рдХ</th><th>рдкрд░рд┐рдорд╛рдг</th><th>рджрд░ (рд░реБ.)</th><th>рд░рдХрдо</th></tr>
<tr>
<td class="left"><input placeholder="рдЬрд╕реНрддреИ: рдкрд╢реБ / рдмрд┐рдЙ рдЦрд░реАрдж"></td>
<td><input type="number" oninput="calcExpenseRow(this)"></td>
<td><input type="number" oninput="calcExpenseRow(this)"></td>
<td class="rowTotal">0</td>
</tr>
</table>
<button onclick="addExpenseRow(this)">+ рдЦрд░реНрдЪ рдердкреНрдиреБрд╣реЛрд╕реН</button>
<div class="total">Category Total: рд░реБ. <span class="catTotal">0</span></div>
</div>

<!-- 2 -->
<div class="category">
<h2>реия╕ПтГг рдореЗрд╢реАрди / рдФрдЬрд╛рд░ / рдкреНрд░рд╡рд┐рдзрд┐ / рд╕рд╡рд╛рд░реА</h2>
<label>Category Narration</label>
<textarea placeholder="рдЙрддреНрдкрд╛рджрди рддрдерд╛ рд╡реНрдпрд╡рд╕реНрдерд╛рдкрдирдХрд╛ рд▓рд╛рдЧрд┐ рдЖрд╡рд╢реНрдпрдХ рдореЗрд╢реАрди рддрдерд╛ рдФрдЬрд╛рд░ рдЦрд░реНрдЪред"></textarea>

<table>
<tr><th>рд╢реАрд░реНрд╖рдХ</th><th>рдкрд░рд┐рдорд╛рдг</th><th>рджрд░</th><th>рд░рдХрдо</th></tr>
<tr>
<td class="left"><input placeholder="рдЬрд╕реНрддреИ: рджрд╛рдирд╛ рдорд┐рдХреНрд╕рд░"></td>
<td><input type="number" oninput="calcExpenseRow(this)"></td>
<td><input type="number" oninput="calcExpenseRow(this)"></td>
<td class="rowTotal">0</td>
</tr>
</table>
<button onclick="addExpenseRow(this)">+ рдЦрд░реНрдЪ рдердкреНрдиреБрд╣реЛрд╕реН</button>
<div class="total">Category Total: рд░реБ. <span class="catTotal">0</span></div>
</div>

<!-- 3 -->
<div class="category">
<h2>рейя╕ПтГг рдкреВрд░реНрд╡рд╛рдзрд╛рд░ рдирд┐рд░реНрдорд╛рдг</h2>
<label>Category Narration</label>
<textarea placeholder="рдЦреЛрд░, рд╢реЗрдб, рдЯрдиреЗрд▓, рдкрд╛рдиреА рддрдерд╛ рдмрд┐рдЬреБрд▓реА рдЬрдбрд╛рди рдЦрд░реНрдЪред"></textarea>

<table>
<tr><th>рд╢реАрд░реНрд╖рдХ</th><th>рдкрд░рд┐рдорд╛рдг</th><th>рджрд░</th><th>рд░рдХрдо</th></tr>
<tr>
<td class="left"><input placeholder="рдЬрд╕реНрддреИ: рдЦреЛрд░ рдирд┐рд░реНрдорд╛рдг"></td>
<td><input type="number" oninput="calcExpenseRow(this)"></td>
<td><input type="number" oninput="calcExpenseRow(this)"></td>
<td class="rowTotal">0</td>
</tr>
</table>
<button onclick="addExpenseRow(this)">+ рдЦрд░реНрдЪ рдердкреНрдиреБрд╣реЛрд╕реН</button>
<div class="total">Category Total: рд░реБ. <span class="catTotal">0</span></div>
</div>

<!-- 4 -->
<div class="category">
<h2>рекя╕ПтГг рдХрдЪреНрдЪрд╛ рдкрджрд╛рд░реНрде (Operating Cost)</h2>
<label>Category Narration</label>
<textarea placeholder="рджрд╛рдирд╛, рднреЗрдЯреЗрд░реАрдирд░реА рдФрд╖рдзрд┐, рдорд▓, рд╡рд┐рд╖рд╛рджреА, рдмрд┐рдЙ рдЖрджрд┐рдорд╛ рд▓рд╛рдЧреНрдиреЗ рдирд┐рдпрдорд┐рдд рдЦрд░реНрдЪред"></textarea>

<table>
<tr><th>рд╢реАрд░реНрд╖рдХ</th><th>рдкрд░рд┐рдорд╛рдг</th><th>рджрд░</th><th>рд░рдХрдо</th></tr>
<tr>
<td class="left"><input placeholder="рдЬрд╕реНрддреИ: рднреЗрдЯреЗрд░реАрдирд░реА рдФрд╖рдзрд┐"></td>
<td><input type="number" oninput="calcExpenseRow(this)"></td>
<td><input type="number" oninput="calcExpenseRow(this)"></td>
<td class="rowTotal">0</td>
</tr>
</table>
<button onclick="addExpenseRow(this)">+ рдЦрд░реНрдЪ рдердкреНрдиреБрд╣реЛрд╕реН</button>
<div class="total">Category Total: рд░реБ. <span class="catTotal">0</span></div>
</div>

<!-- 5 -->
<div class="category">
<h2>реля╕ПтГг рдХрд╛рдорджрд╛рд░ / рд╢реНрд░рдо рдЦрд░реНрдЪ</h2>
<label>Category Narration</label>
<textarea placeholder="рд╕реНрдерд╛рдпреА рддрдерд╛ рдЕрд╕реНрдерд╛рдпреА рдХрд╛рдорджрд╛рд░рдХреЛ рддрд▓рдм рддрдерд╛ рдЬреНрдпрд╛рд▓рд╛ рдЦрд░реНрдЪред"></textarea>

<table>
<tr><th>рд╢реАрд░реНрд╖рдХ</th><th>рд╕рдВрдЦреНрдпрд╛</th><th>рд╡рд╛рд░реНрд╖рд┐рдХ рджрд░</th><th>рд░рдХрдо</th></tr>
<tr>
<td class="left"><input placeholder="рдЬрд╕реНрддреИ: рд╕реНрдерд╛рдпреА рдХрд╛рдорджрд╛рд░"></td>
<td><input type="number" oninput="calcExpenseRow(this)"></td>
<td><input type="number" oninput="calcExpenseRow(this)"></td>
<td class="rowTotal">0</td>
</tr>
</table>
<button onclick="addExpenseRow(this)">+ рдЦрд░реНрдЪ рдердкреНрдиреБрд╣реЛрд╕реН</button>
<div class="total">Category Total: рд░реБ. <span class="catTotal">0</span></div>
</div>

<!-- 6 -->
<div class="category">
<h2>ремя╕ПтГг рд╡рд┐рд╡рд┐рдз рдЦрд░реНрдЪ</h2>
<label>Category Narration</label>
<textarea placeholder="рдЕрдиреНрдп рд╢реАрд░реНрд╖рдХрдорд╛ рдирдкрд░реНрдиреЗ рддрд░ рдЖрд╡рд╢реНрдпрдХ рд╡рд┐рд╡рд┐рдз рдЦрд░реНрдЪред"></textarea>

<table>
<tr><th>рд╢реАрд░реНрд╖рдХ</th><th>рдкрд░рд┐рдорд╛рдг</th><th>рджрд░</th><th>рд░рдХрдо</th></tr>
<tr>
<td class="left"><input placeholder="рдЬрд╕реНрддреИ: рдорд░реНрдордд рдЦрд░реНрдЪ"></td>
<td><input type="number" oninput="calcExpenseRow(this)"></td>
<td><input type="number" oninput="calcExpenseRow(this)"></td>
<td class="rowTotal">0</td>
</tr>
</table>
<button onclick="addExpenseRow(this)">+ рдЦрд░реНрдЪ рдердкреНрдиреБрд╣реЛрд╕реН</button>
<div class="total">Category Total: рд░реБ. <span class="catTotal">0</span></div>
</div>

<!-- ================= GRAND TOTAL ================= -->
<h2>ЁЯФв рдХреБрд▓ рд╡рд╛рд░реНрд╖рд┐рдХ рдЦрд░реНрдЪ / рдХреБрд▓ рд▓рдЧрд╛рдиреА</h2>
<div class="total" style="font-size:18px">
рд░реБ. <span id="grandTotal">0</span>
</div>

<!-- ================= FUNDING ================= -->
<div class="category">
<h2>ЁЯТ░ рдЦрд░реНрдЪ / рд▓рдЧрд╛рдиреА рд╡реНрдпрд╣реЛрд░рд┐рдиреЗ рд╕реНрд░реЛрдд</h2>
<p class="small">рдкреНрд░рддрд┐рд╢рдд (%) рд╣рд╛рдиреЗрдкрдЫрд┐ рд░рдХрдо рд╕реНрд╡рддрдГ рдЫреБрдЯреНрдЯрд┐рдиреНрдЫ</p>

<table id="fundingTable">
<tr><th>рд╕реНрд░реЛрдд</th><th>%</th><th>рд░рдХрдо (рд░реБ.)</th></tr>
<tr>
<td class="left"><input value="рд╕рд░рдХрд╛рд░"></td>
<td><input type="number" value="40" oninput="calcFunding()"></td>
<td class="fundAmt">0</td>
</tr>
</table>

<button onclick="addFundingRow()">+ рд╕реНрд░реЛрдд рдердкреНрдиреБрд╣реЛрд╕реН</button>

<div class="total">
рдЬрдореНрдорд╛ рдкреНрд░рддрд┐рд╢рдд: <span id="percTotal">40</span> %
</div>

<label>Funding Narration</label>
<textarea placeholder="рдХреБрд▓ рд▓рдЧрд╛рдиреА рдХреБрдитАУрдХреБрди рд╕реНрд░реЛрддрдмрд╛рдЯ рдХрддрд┐ рдкреНрд░рддрд┐рд╢рдд рд╡реНрдпрд╣реЛрд░рд┐рдиреЗ рднрдиреНрдиреЗ рд╡рд┐рд╡рд░рдгред"></textarea>
</div>

</main>

<footer>
┬й farmerbase BPMS Demo | Expense + Investment Module
</footer>

</body>
</html>
